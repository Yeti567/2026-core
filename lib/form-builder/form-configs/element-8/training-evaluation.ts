/**
 * Training Evaluation Form
 * COR Element 8: Training & Communication
 * 
 * Evaluate the effectiveness of training programs.
 */

import type { FormConfig } from '../../import-forms';

export const trainingEvaluation: FormConfig = {
  code: 'training_evaluation',
  name: 'Training Evaluation Form',
  description: 'Evaluate the effectiveness of training programs from the trainer perspective to improve future training delivery.',
  cor_element: 8,
  frequency: 'as_needed',
  estimated_time_minutes: 15,
  icon: 'Star',
  color: '#F59E0B',
  is_mandatory: false,

  sections: [
    {
      title: 'Training Details',
      order_index: 0,
      fields: [
        {
          code: 'training_date',
          label: 'Training Date',
          field_type: 'date',
          validation_rules: { required: true },
          order_index: 0,
          width: 'half',
        },
        {
          code: 'evaluation_date',
          label: 'Evaluation Date',
          field_type: 'date',
          default_value: 'today',
          validation_rules: { required: true },
          order_index: 1,
          width: 'half',
        },
        {
          code: 'trainer',
          label: 'Trainer',
          field_type: 'worker_select',
          validation_rules: { required: true },
          order_index: 2,
          width: 'half',
        },
        {
          code: 'training_topic',
          label: 'Training Topic/Title',
          field_type: 'text',
          validation_rules: { required: true },
          order_index: 3,
          width: 'half',
        },
        {
          code: 'training_type',
          label: 'Training Type',
          field_type: 'dropdown',
          options: [
            { value: 'orientation', label: 'New Employee Orientation' },
            { value: 'safety_specific', label: 'Safety-Specific Training' },
            { value: 'equipment', label: 'Equipment Training' },
            { value: 'procedure', label: 'Procedure Training' },
            { value: 'refresher', label: 'Refresher Training' },
            { value: 'certification', label: 'Certification Course' },
            { value: 'toolbox_talk', label: 'Toolbox Talk' },
          ],
          validation_rules: { required: true },
          order_index: 4,
          width: 'half',
        },
        {
          code: 'attendee_count',
          label: 'Number of Attendees',
          field_type: 'number',
          validation_rules: { required: true, min_value: 1 },
          order_index: 5,
          width: 'half',
        },
        {
          code: 'duration_hours',
          label: 'Duration (hours)',
          field_type: 'number',
          validation_rules: { required: true, min_value: 0 },
          order_index: 6,
          width: 'half',
        },
      ],
    },
    {
      title: 'Training Delivery Assessment',
      description: 'Assess how well the training was delivered',
      order_index: 1,
      fields: [
        {
          code: 'objectives_met',
          label: 'Were training objectives met?',
          field_type: 'dropdown',
          options: [
            { value: '5', label: 'Fully met - All objectives achieved' },
            { value: '4', label: 'Mostly met - Most objectives achieved' },
            { value: '3', label: 'Partially met - Some objectives achieved' },
            { value: '2', label: 'Minimally met - Few objectives achieved' },
            { value: '1', label: 'Not met - Objectives not achieved' },
          ],
          validation_rules: { required: true },
          order_index: 0,
          width: 'full',
        },
        {
          code: 'participant_engagement',
          label: 'Participant Engagement Level',
          field_type: 'dropdown',
          options: [
            { value: '5', label: 'Excellent - Highly engaged throughout' },
            { value: '4', label: 'Good - Generally engaged' },
            { value: '3', label: 'Average - Moderate engagement' },
            { value: '2', label: 'Below Average - Low engagement' },
            { value: '1', label: 'Poor - Minimal engagement' },
          ],
          validation_rules: { required: true },
          order_index: 1,
          width: 'half',
        },
        {
          code: 'material_effectiveness',
          label: 'Training Material Effectiveness',
          field_type: 'dropdown',
          options: [
            { value: '5', label: 'Excellent - Very effective' },
            { value: '4', label: 'Good - Effective' },
            { value: '3', label: 'Average - Adequate' },
            { value: '2', label: 'Below Average - Needs improvement' },
            { value: '1', label: 'Poor - Ineffective' },
          ],
          validation_rules: { required: true },
          order_index: 2,
          width: 'half',
        },
        {
          code: 'time_adequate',
          label: 'Was allocated time adequate?',
          field_type: 'radio',
          options: ['Yes', 'Too short', 'Too long'],
          validation_rules: { required: true },
          order_index: 3,
          width: 'full',
        },
        {
          code: 'hands_on_completed',
          label: 'Were hands-on activities completed?',
          field_type: 'radio',
          options: ['Yes', 'Partially', 'No', 'N/A'],
          validation_rules: { required: true },
          order_index: 4,
          width: 'half',
        },
        {
          code: 'facility_adequate',
          label: 'Was the training facility adequate?',
          field_type: 'radio',
          options: ['Yes', 'No'],
          validation_rules: { required: true },
          order_index: 5,
          width: 'half',
        },
      ],
    },
    {
      title: 'Participant Comprehension',
      order_index: 2,
      fields: [
        {
          code: 'assessment_conducted',
          label: 'Was a comprehension assessment conducted?',
          field_type: 'radio',
          options: ['Yes - Written test', 'Yes - Practical test', 'Yes - Verbal quiz', 'No'],
          validation_rules: { required: true },
          order_index: 0,
          width: 'full',
        },
        {
          code: 'pass_rate',
          label: 'Pass Rate (%)',
          field_type: 'number',
          help_text: 'Percentage of participants who demonstrated competency',
          validation_rules: { min_value: 0, max_value: 100 },
          conditional_logic: {
            field_code: 'assessment_conducted',
            operator: 'not_equals',
            value: 'No',
          },
          order_index: 1,
          width: 'half',
        },
        {
          code: 'retraining_required',
          label: 'Number requiring retraining',
          field_type: 'number',
          validation_rules: { min_value: 0 },
          order_index: 2,
          width: 'half',
        },
        {
          code: 'common_difficulties',
          label: 'Common Areas of Difficulty',
          field_type: 'textarea',
          placeholder: 'What topics did participants struggle with?',
          order_index: 3,
          width: 'full',
        },
        {
          code: 'questions_raised',
          label: 'Significant Questions Raised',
          field_type: 'textarea',
          placeholder: 'Document any important questions that came up...',
          order_index: 4,
          width: 'full',
        },
      ],
    },
    {
      title: 'Improvements & Recommendations',
      order_index: 3,
      fields: [
        {
          code: 'what_worked_well',
          label: 'What Worked Well',
          field_type: 'textarea',
          placeholder: 'What aspects of the training were successful?',
          validation_rules: { required: true },
          order_index: 0,
          width: 'full',
        },
        {
          code: 'areas_for_improvement',
          label: 'Areas for Improvement',
          field_type: 'textarea',
          placeholder: 'What could be improved for future sessions?',
          validation_rules: { required: true },
          order_index: 1,
          width: 'full',
        },
        {
          code: 'material_updates_needed',
          label: 'Are training material updates needed?',
          field_type: 'radio',
          options: ['Yes', 'No'],
          validation_rules: { required: true },
          order_index: 2,
          width: 'full',
        },
        {
          code: 'material_updates_description',
          label: 'Describe Needed Updates',
          field_type: 'textarea',
          conditional_logic: {
            field_code: 'material_updates_needed',
            operator: 'equals',
            value: 'Yes',
          },
          order_index: 3,
          width: 'full',
        },
        {
          code: 'recommended_frequency',
          label: 'Recommended Refresher Frequency',
          field_type: 'dropdown',
          options: [
            { value: 'monthly', label: 'Monthly' },
            { value: 'quarterly', label: 'Quarterly' },
            { value: 'semi_annual', label: 'Semi-Annual' },
            { value: 'annual', label: 'Annual' },
            { value: 'as_needed', label: 'As Needed' },
          ],
          order_index: 4,
          width: 'half',
        },
        {
          code: 'overall_effectiveness',
          label: 'Overall Training Effectiveness',
          field_type: 'dropdown',
          options: [
            { value: '5', label: '5 - Excellent' },
            { value: '4', label: '4 - Good' },
            { value: '3', label: '3 - Satisfactory' },
            { value: '2', label: '2 - Needs Improvement' },
            { value: '1', label: '1 - Unsatisfactory' },
          ],
          validation_rules: { required: true },
          order_index: 5,
          width: 'half',
        },
      ],
    },
    {
      title: 'Sign-Off',
      order_index: 4,
      fields: [
        {
          code: 'trainer_signature',
          label: 'Trainer Signature',
          field_type: 'signature',
          validation_rules: { required: true },
          order_index: 0,
          width: 'full',
        },
      ],
    },
  ],

  workflow: {
    submit_to_role: 'supervisor',
    notify_roles: ['admin'],
    sync_priority: 4,
    requires_approval: false,
  },
};
